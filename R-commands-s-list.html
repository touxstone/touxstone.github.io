<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-09-23 Fri 23:02 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>A Coursera on R, my notepad.</title>
<meta name="author" content="RS. Mo." />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
</style>
<style type="text/css">#table-of-contents{ font-size: 10pt; position: fixed; right: 0em; top: 0em; background: #F3F9FE; -webkit-box-shadow: 0 0 1em #777777; -moz-box-shadow: 0 0 1em #777777; -webkit-border-bottom-left-radius: 5px;-moz-border-radius-bottomleft: 5px; text-align: right; /* ensure doesn't flow off the screen when expanded */ max-height: 80%; overflow: auto; } #table-of-contents h2 {font-size: 10pt; max-width: 8em; font-weight: normal; padding-left: 0.5em; padding-left: 0.5em; padding-top: 0.05em; padding-bottom: 0.05em; } #table-of-contents #text-table-of-contents {display: none; text-align: left; } #table-of-contents:hover #text-table-of-contents {display: block; padding: 0.5em; clear: left; margin-top: -1.5em; } pre.src{position: static; } code{font-size: 1.1rem; border: 1px solid #ddd; background: #EEEEEE; -webkit-border-radius: 0.4em; -moz-border-radius: 0.4em; -ms-border-radius: 0.4em; -o-border-radius: 0.4em; border-radius: 0.4em; font-weight: normal; padding: 0 0.2em;}pre.src {background-color: #E5E5E5;} </style>
<style type="text/css">body{max-width:70%; margin:auto; }</style>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="index.html"> UP </a>
 |
 <a accesskey="H" href="index.html"> HOME </a>
</div><div id="content" class="content">
<h1 class="title">A Coursera on R, my notepad.</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org51c9bcb">Reading Data</a>
<ul>
<li><a href="#org856ebd5">Reading Data</a></li>
<li><a href="#org6f6332a">Writing Data</a></li>
<li><a href="#org75b4589">Reading Data Files with read.table</a>
<ul>
<li><a href="#org8e6c7f6">read.table</a></li>
<li><a href="#orgab2b421">Calculating Memory Requirements.</a></li>
<li><a href="#org7f4fdc5">Reading Lines of a Text File.</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org9ebae85">Control Structures</a>
<ul>
<li><a href="#orgaca607d">Control Structures: <code>if</code></a></li>
<li><a href="#org3be7e1b">Control Structures: <code>for</code></a>
<ul>
<li><a href="#orgb008c7f">Nested <code>for</code> loops.</a></li>
</ul>
</li>
<li><a href="#org80c148e">Control Structures: <code>while</code></a></li>
<li><a href="#orgb84e343">Control Structures: <code>repeat</code></a></li>
<li><a href="#org341610a">Control Structures: <code>next, return</code> .</a></li>
</ul>
</li>
<li><a href="#org85c36cd">Functions</a>
<ul>
<li>
<ul>
<li><a href="#orge02986a">Defining a Function, Lazy Evaluation.</a></li>
</ul>
</li>
<li><a href="#org689ba53">Creating Functions.</a></li>
<li><a href="#orgc0a6f2d">Lexical Scoping</a></li>
<li><a href="#org74aa0cf">Exploring a Function Closure.</a></li>
<li><a href="#org4eae76c">Lexical vs Dynamic.</a></li>
</ul>
</li>
<li><a href="#org7811a3a">Vectorized Operations.</a></li>
<li><a href="#org9d63dba">Dates and Times in R.</a></li>
<li><a href="#org4704e9d">Loop Functions.</a>
<ul>
<li><a href="#org13eca9b">Looping on the Command Line.</a>
<ul>
<li><a href="#org41cd410"><code>lapply</code></a></li>
<li><a href="#org91dd97e"><code>split</code></a></li>
<li><a href="#orgaf970a1">Splitting on More than One Level.</a></li>
<li><a href="#org32b207d"><code>mapply</code></a></li>
<li><a href="#orgcf49ddd">Vectorizing a Function.</a></li>
</ul>
</li>
<li><a href="#orgbbf97c8">The <code>str</code> Function.</a></li>
</ul>
</li>
<li><a href="#orgef110b9">Generating Random Numbers (Simulation)</a>
<ul>
<li>
<ul>
<li><a href="#orge4e7201">The <code>set.seed</code> Function.</a></li>
</ul>
</li>
<li><a href="#org2de8f0d">Generating Poisson Data.</a></li>
<li><a href="#org8dce4b2">Generating Random Numbers From a Linear Model.</a></li>
</ul>
</li>
<li><a href="#org3122c1c">The R Profiler</a></li>
<li><a href="#org7c3bffb">Appendix. A, Some key shot views.</a></li>
<li><a href="#org7e0b902">Appendix. B Short List of the Most Useful Commands.</a>
<ul>
<li><a href="#org64fdcb4">Input and Display</a></li>
<li><a href="#orgeb26637">Moving around.</a></li>
<li><a href="#orgdab7252">Distributions</a></li>
<li><a href="#orgaa35088">Data Manipulation.</a></li>
<li><a href="#org35d2010">Statistics and Transformations.</a></li>
<li><a href="#org35d683a">More Statistics: Regression and Linear Model</a></li>
<li><a href="#org579302a">Useful Additional Commands.</a></li>
<li><a href="#org94dc058">Graphics.</a></li>
<li><a href="#orga29ee90">Distributions.</a></li>
<li><a href="#org66991bd">Working with Dates.</a></li>
<li><a href="#org17d45ac">And More&#x2026;</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org51c9bcb" class="outline-2">
<h2 id="org51c9bcb">Reading Data</h2>
<div class="outline-text-2" id="text-org51c9bcb">
<ul class="org-ul">
<li><a href="https://class.coursera.org/rprog-002/lecture/29">from Reading and Writing Data (part 1)</a></li>
</ul>
</div>
<div id="outline-container-org856ebd5" class="outline-3">
<h3 id="org856ebd5">Reading Data</h3>
<div class="outline-text-3" id="text-org856ebd5">
<div class="org-src-container">
<pre class="src src-R">read.table, read.csv           #for Reading tabular data
readLines                      # for reading lines of a text file
source                         # for reading in R code files (inverse of dump)
dget                           # for reading in R code files (inverse of dput)
load                           # for reading in saved workspaces
unserialize                    # for reading single R objects in binary form
</pre>
</div>
</div>
</div>

<div id="outline-container-org6f6332a" class="outline-3">
<h3 id="org6f6332a">Writing Data</h3>
<div class="outline-text-3" id="text-org6f6332a">
<p>
There are analogous functions for writing data to files.
</p>

<div class="org-src-container">
<pre class="src src-R">write.table                
writeLines
dump 
dput
save
serialize
</pre>
</div>
</div>
</div>

<div id="outline-container-org75b4589" class="outline-3">
<h3 id="org75b4589">Reading Data Files with read.table</h3>
<div class="outline-text-3" id="text-org75b4589">
<p>
The read.table function is one of the most common used functions for reading data. It has a few important arguments:
</p>
<div class="org-src-container">
<pre class="src src-R">file             # the name of a file, or a connection.
header           # logical indicating how the columns are separated
sep              # a string indicating how the columns are separated.
colClasses       # a character vector indicating the class of each column in the dataset.
nrows            # the number of rows in the dataset.
comment.char     # a character string indicating the comment character.
skip             # the number of lines to skip from the beginning
stringsAsFactors # should character variables be coded as factors? 

</pre>
</div>
</div>
<div id="outline-container-org8e6c7f6" class="outline-4">
<h4 id="org8e6c7f6">read.table</h4>
<div class="outline-text-4" id="text-org8e6c7f6">
<p>
For small to moderate sized datasets, you can usually call read.table without specifying any other arguments.
</p>
<div class="org-src-container">
<pre class="src src-R">data &lt;- read.table("foo.txt")

</pre>
</div>
<p>
R will automatically: <br />
</p>
<ul class="org-ul">
<li>Skip lines that begin with a #</li>
<li>Figure out how many rows there are (and how much memory needs to be allocated)</li>
<li>Figure what type of variable is in each column of the table telling R all these things directly makes R run faster and more efficiently.</li>
<li>read.csv is identical to read.table except that the default separator is a comma.</li>
</ul>
</div>
</div>

<div id="outline-container-orgab2b421" class="outline-4">
<h4 id="orgab2b421">Calculating Memory Requirements.</h4>
<div class="outline-text-4" id="text-orgab2b421">
<p>
I have a data frame with 1'500,000 and 120 columns, all of which are numeric data. Roughly, how much memory is required to store this data frame? <br />
1'500,000 x 120 x 8 bytes/numeric <br />
     = 1440000000 bytes <br />
     = 1440000000 /220 bytes/MB <br />
     = 1373.29 MB <br />
     = 1.34 GB  <br />
</p>
</div>
</div>


<div id="outline-container-org7f4fdc5" class="outline-4">
<h4 id="org7f4fdc5">Reading Lines of a Text File.</h4>
<div class="outline-text-4" id="text-org7f4fdc5">
<p>
<b>readLines</b> can be useful for reading in lines of webpages.
</p>
<div class="org-src-container">
<pre class="src src-R">## This might take time
con &lt;- url("http://www.jhsph.edu", "r")
x &lt;- readLines(con)
&gt; head(x)
[1] "&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\"&gt;"
[2] ""
[3] "&lt;html&gt;"
[4] "&lt;head&gt;"
[5] "\t&lt;meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8

</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org9ebae85" class="outline-2">
<h2 id="org9ebae85">Control Structures</h2>
<div class="outline-text-2" id="text-org9ebae85">
<p>
Control structures in R allow you to control the flow of execution of the program, depending on run-time conditions. common structures are:
</p>

<div class="org-src-container">
<pre class="src src-R">if, else      # testing a condition.
for           # execute a loop a fixed number of times.
while         # execute a loop while a condition is true.
repeat        # execute an infinite loop.
break         # break the execution of a loop.
next          # skip an interaction of a loop.
return        # exit a function.
</pre>
</div>

<p>
Most control structures are not used in interactive sessions, but rather when writing functions or longer expressions.
</p>
</div>

<div id="outline-container-orgaca607d" class="outline-3">
<h3 id="orgaca607d">Control Structures: <code>if</code></h3>
<div class="outline-text-3" id="text-orgaca607d">
<div class="org-src-container">
<pre class="src src-R">if(&lt;condition&gt;) {
   ## do something
} else {
   ## do something else
}

if(&lt;condition&gt;) {
   ## do something
} else if (&lt;condition&gt;) {
   ## do something different
} else {
   ## do something different
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org3be7e1b" class="outline-3">
<h3 id="org3be7e1b">Control Structures: <code>for</code></h3>
<div class="outline-text-3" id="text-org3be7e1b">
<p>
<b>for</b> loops take an interator variable and assign it succesive values from a sequence or vector. <b>For</b> loops are most commonly used for iterating over the elements of an object (list, vector, etc.)
</p>
<div class="org-src-container">
<pre class="src src-R">for(i in 1:10) {
        print(i)
}
</pre>
</div>
<p>
This loop takes the <b>i</b> variable and in each iteration of the loop gives it values 1,2,3, &#x2026;, 10, and then exits.
</p>
<div class="org-src-container">
<pre class="src src-R">## These 3 *for* loops have the same behaviour
x &lt;- c("a", "b", "c", "d")
for(i in 1:4) {
    print(x[i])
}

## it create a vector based on the var length and do the same as in the previous.
for(i in seq_along(x)) {
         print(x[i])
}

## Here we got a different index variable, its a letter. As the index variable is going to be taking values from the vector itself, there is not reason why the index variable has to be an integer.
for(letter in x) {
        print(x[i])
}

## This version is more compact.
for(i in 1:4) print(x[i])
</pre>
</div>
</div>


<div id="outline-container-orgb008c7f" class="outline-4">
<h4 id="orgb008c7f">Nested <code>for</code> loops.</h4>
<div class="outline-text-4" id="text-orgb008c7f">
<p>
<code>for</code> loops can be nested. 
Though, be careful when nesting. Nesting beyond 2-3 levels is often very difficult to read/understand.
</p>
<div class="org-src-container">
<pre class="src src-R">#Here an example:
x &lt;- matrix(1:6, 2,3)
for(i in seq_len(nrow(x))) {
         for(j in seq_len(ncol(x))) {
                  print(x[i, j])
         }
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org80c148e" class="outline-3">
<h3 id="org80c148e">Control Structures: <code>while</code></h3>
<div class="outline-text-3" id="text-org80c148e">
<p>
While loops begin by testing a condition. If it is true, then they execute the loop body. Once the loop body is executed, the condition is tested again, and so forth.
</p>

<p>
-PS. Conditions are always evaluated from left to right.
</p>
<div class="org-src-container">
<pre class="src src-R">z &lt;- 5

while(z &gt;= 3 &amp;&amp; z &lt;= 10) {
        print(z)
        coin &lt;- rbinom(1, 1, 0.5)

        if(coin == 1) { ##random walk
                z &lt;- z + 1
        } else {
                z &lt;- z - 1
        } 
}
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb84e343" class="outline-3">
<h3 id="orgb84e343">Control Structures: <code>repeat</code></h3>
<div class="outline-text-3" id="text-orgb84e343">
<p>
Repeat initiates an infinite loop; these are not commonly used in statistical applications but they do have their uses. The only way to exit a <code>repeat</code> loop is to call a <code>break</code>.
</p>

<p>
-Better to set a hard limit on the number of iterations (e.g. using a <code>for</code> loop) and then report whether convergence was achieved or not.
</p>
</div>
</div>

<div id="outline-container-org341610a" class="outline-3">
<h3 id="org341610a">Control Structures: <code>next, return</code> .</h3>
<div class="outline-text-3" id="text-org341610a">
<div class="org-src-container">
<pre class="src src-R">for(i in 1:100) {
         if(i &lt;= 20) {
                 ## Skip the first 20 iterations
                 next
         }
         ## Do something here
}
</pre>
</div>

<p>
<code>return</code> signals that a function should exit and return a given value.
</p>

<ul class="org-ul">
<li>Summary:
<ul class="org-ul">
<li>Control Structures like <code>if</code>, <code>while</code> and <code>for</code> allow us to control the flow of an <b>R</b> program.</li>
<li>Infinite loops should generally be avoided, even if they are theoretically correct.</li>
<li>Control Structures mentioned here are primarily useful for writing programs; for command line interactive work, the *apply functions are more useful.</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org85c36cd" class="outline-2">
<h2 id="org85c36cd">Functions</h2>
<div class="outline-text-2" id="text-org85c36cd">
<p>
Functions represent some of the most powerful aspects of the <b>R</b> language. It's in some way the transition of the user of <b>R</b> into a kind of programmer of <b>R</b>.
</p>

<ul class="org-ul">
<li>Basics about functions:
<ul class="org-ul">
<li>Functions are created using the function () directive and are stored as <b>R</b> objects.</li>
<li>Functions are "first class objects", which means that they can be treated much like any other <b>R</b> object.</li>
<li>Functions can be nested, so that you can define a function inside another function. The return value of a function is the last expression in the function body to be evaluated.</li>
</ul></li>
</ul>
<div class="org-src-container">
<pre class="src src-R">f &lt;- function(&lt;argument&gt;) {
        ## Do something interesting
}
</pre>
</div>
</div>


<div id="outline-container-orge02986a" class="outline-4">
<h4 id="orge02986a">Defining a Function, Lazy Evaluation.</h4>
<div class="outline-text-4" id="text-orge02986a">
<p>
Arguments to functions are evaluated lazily, so they are evaluated only as needed.
</p>
<div class="org-src-container">
<pre class="src src-R">f &lt;- function(a, b) {
     a^2
}
f(2)

## [1] 4
</pre>
</div>
<p>
This function never actually uses the argument b, so calling <b>f(2)</b> will not produce an error because the 2 gets positionally matched to <b>a</b>
</p>
</div>
</div>

<div id="outline-container-org689ba53" class="outline-3">
<h3 id="org689ba53">Creating Functions.</h3>
<div class="outline-text-3" id="text-org689ba53">
<p>
Here a simple example:
</p>
<div class="org-src-container">
<pre class="src src-R">add2 &lt;- function(x, y) {
x + y
}
</pre>
</div>

<p>
Here another example, a function that will take a vector of numbers and return the subset of the vector that's above the value of another one number.
</p>
<div class="org-src-container">
<pre class="src src-R">aboven &lt;- function(x, n) {
 use &lt;- x &gt; n
 x[use]
}
</pre>
</div>

<p>
But, suppose we need to specify a value n by default, let's say 10
</p>
<div class="org-src-container">
<pre class="src src-R">above10 &lt;- function(x, n = 10) {
        use &lt;- x &gt; n
        x[use]
      }
</pre>
</div>

<p>
Here a screen-shot with the above examples.
</p>


<div id="org6ab98f3" class="figure">
<p><img src="img/firstRfunct.png" alt="firstRfunct.png" />
</p>
<p><span class="figure-number">Figure 1: </span>Here what an emacs-R buffer with the above examples looks like.</p>
</div>



<div class="org-src-container">
<pre class="src src-lisp"><span style="color: #99d1ce;">(</span><span style="color: #EEEE20;">defun</span> <span style="color: #edb443;">foo</span> <span style="color: #33859e;">(</span>x<span style="color: #33859e;">)</span>
<span style="color: #33859e;">(</span>* x 3<span style="color: #33859e;">)</span><span style="color: #99d1ce;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc0a6f2d" class="outline-3">
<h3 id="orgc0a6f2d">Lexical Scoping</h3>
<div class="outline-text-3" id="text-orgc0a6f2d">
<p>
Searching for the value for a free variable
</p>
<ul class="org-ul">
<li>If the value of a symbol is not found in the environment in which a function was defined, then the search is continued in the <b>parent environment.</b></li>
<li>The search continues down the sequence of parent environments until we hit the top-level environment, this is usually the global environment (workspace) or the namespace of a package.</li>
<li>After the top-level environment, the search continues down the search list until we hit the <b>empty environment</b>. If a value for a given symbol cannot be found once the empty environment is arrived at, then an error is thrown.</li>
</ul>

<p>
Let's have a look at this example:
</p>
<div class="org-src-container">
<pre class="src src-R">make.power &lt;- function(n) {
        pow &lt;- function(x) {
               x^n
        }
        pow 
}
</pre>
</div>

<p>
This function returns another function as its value.
</p>
<div class="org-src-container">
<pre class="src src-R">&gt; cube &lt;- make.power(3)
&gt; square &lt;-make.power(2)
&gt; cube(3)
[1] 27
&gt; square(3)
[1] 9 
</pre>
</div>
</div>
</div>

<div id="outline-container-org74aa0cf" class="outline-3">
<h3 id="org74aa0cf">Exploring a Function Closure.</h3>
<div class="outline-text-3" id="text-org74aa0cf">
<p>
So, how do you know what's in a function's environment?. 
You can look at the environment the function was defined, by calling the LS function.
</p>

<div class="org-src-container">
<pre class="src src-R">&gt; ls(environment(cube))
[1] "n" "pow"
&gt; get("n", environment(cube))
[1] 3

&gt; ls(environment(square))
[1] "n" "pow"
&gt; get("n", environment(square))
[1] 2 
</pre>
</div>
</div>
</div>

<div id="outline-container-org4eae76c" class="outline-3">
<h3 id="org4eae76c">Lexical vs Dynamic.</h3>
<div class="outline-text-3" id="text-org4eae76c">
<div class="org-src-container">
<pre class="src src-R">y &lt;- 10
f &lt;- function(x) {
y &lt;- 2
y^2 + g(x)
}

g &lt;- function(x) {
x * y
}
</pre>
</div>

<p>
What's the value of:
</p>

<div class="org-src-container">
<pre class="src src-R">f(3)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7811a3a" class="outline-2">
<h2 id="org7811a3a">Vectorized Operations.</h2>
<div class="outline-text-2" id="text-org7811a3a">
<p>
Many operations in <b>R</b> are <b>vectorized</b> making code more efficient.
</p>

<p>
Here a couple of examples from my R box.
</p>


<div id="org7bb0b3d" class="figure">
<p><img src="img/vectorized-oper.png" alt="vectorized-oper.png" />
</p>
<p><span class="figure-number">Figure 2: </span>Vectorized Lineal Operations in <b>R</b></p>
</div>


<div id="orgc71f6c3" class="figure">
<p><img src="img/vectorized-matr-oper.png" alt="vectorized-matr-oper.png" />
</p>
<p><span class="figure-number">Figure 3: </span>Vectorized Matrix Operations in <b>R</b>.</p>
</div>

<p>
As seen on the screen shoots operations are performed in parallel, literally element by element.
</p>
</div>
</div>

<div id="outline-container-org9d63dba" class="outline-2">
<h2 id="org9d63dba">Dates and Times in R.</h2>
<div class="outline-text-2" id="text-org9d63dba">
<p>
<b>R</b> has developed a special representation of dates and times.
</p>
<ul class="org-ul">
<li>Dates are represented by the Date class.</li>
<li>Times are represented by the POSIXct or the POSIXlt class.</li>
<li>Dates are stored internally as the number of days since 1970-01-01</li>
<li>Times are stored internally as the number of seconds since 1970-01-01.</li>
</ul>
</div>
</div>

<div id="outline-container-org4704e9d" class="outline-2">
<h2 id="org4704e9d">Loop Functions.</h2>
<div class="outline-text-2" id="text-org4704e9d">
<p>
<b>Loop</b> functions are some of the most powerful functions in the <b>R</b> language and they make it kind of very easy to use, specially in an interactive setting.
</p>
</div>
<div id="outline-container-org13eca9b" class="outline-3">
<h3 id="org13eca9b">Looping on the Command Line.</h3>
<div class="outline-text-3" id="text-org13eca9b">
<p>
Writing <b>for</b>, <b>while</b> loops is useful when programming but not particularly on the command line. There are some functions which implement looping to make it easier.
</p>

<ul class="org-ul">
<li>lapply: Loop over a list and evaluate a function on each element.</li>
<li>sapply: Same as lapply but try to simplify the result.</li>
<li>apply: Apply a function over the margins of an array.</li>
<li>tapply: Apply a function over subsets of a vector.</li>
<li>mapply: Multivariate version of lapply.</li>
</ul>
<p>
An auxiliary function <code>split</code> is also useful, particularly in conjunction with <code>lapply</code>.
</p>
</div>

<div id="outline-container-org41cd410" class="outline-4">
<h4 id="org41cd410"><code>lapply</code></h4>
<div class="outline-text-4" id="text-org41cd410">
<p>
<b>lapply</b> takes three arguments: (1) a list x; (2) a function (or the name of the function) FUN; (3) other argument via its &#x2026;argument. If x is not a list, it will be coerced to a list using as.list.
</p>

<div class="org-src-container">
<pre class="src src-R">function (X, FUN, ...)
{
        FUN &lt;- match.fun(FUN)
        if (!is.vector(x) || is.object(x))
            X &lt;- as.list(X)
        .Internal(lapply(X, FUN))
}
&lt;bytecode: 0x7ff7a1951c00&gt;
&lt;environment: namespace:base&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-org91dd97e" class="outline-4">
<h4 id="org91dd97e"><code>split</code></h4>
<div class="outline-text-4" id="text-org91dd97e">
<p>
<b>split</b> takes a vector or other objects and splits it into groups determined by factor or list of factors.
</p>

<div class="org-src-container">
<pre class="src src-R">&gt; str(split)
function (x, f, drop = FALSE, ...) 
</pre>
</div>
<ul class="org-ul">
<li><b>x</b> is a vector (or list) or data frame</li>
<li><b>f</b> is a factor (or coerced to one) or a list of factors.</li>
<li><b>drop</b> indicates whether empty factors levels should be dropped.</li>
</ul>
</div>
</div>
<div id="outline-container-orgaf970a1" class="outline-4">
<h4 id="orgaf970a1">Splitting on More than One Level.</h4>
<div class="outline-text-4" id="text-orgaf970a1">

<div id="org238d451" class="figure">
<p><img src="img/splitting-on-more-levels.png" alt="splitting-on-more-levels.png" />
</p>
<p><span class="figure-number">Figure 4: </span>Splitting on more than one level.</p>
</div>
</div>
</div>

<div id="outline-container-org32b207d" class="outline-4">
<h4 id="org32b207d"><code>mapply</code></h4>
<div class="outline-text-4" id="text-org32b207d">
<p>
<b>mapply</b> is a multivariate apply of sorts which applies a function in parallel over a set of arguments.
</p>
<div class="org-src-container">
<pre class="src src-R">&gt; str(mapply)
function (FUN, ..., MoreArgs = NULL, SIMPLIFY = TRUE, USE.NAMES = TRUE)
</pre>
</div>
<ul class="org-ul">
<li>FUN is a function to apply.</li>
<li>&#x2026; contains arguments to apply over.</li>
<li>MoreArgs is a list of others arguments to FUN.</li>
<li>SIMPLIFY indicates whether the result should be simplified.</li>
</ul>
</div>
</div>

<div id="outline-container-orgcf49ddd" class="outline-4">
<h4 id="orgcf49ddd">Vectorizing a Function.</h4>
</div>
</div>

<div id="outline-container-orgbbf97c8" class="outline-3">
<h3 id="orgbbf97c8">The <code>str</code> Function.</h3>
<div class="outline-text-3" id="text-orgbbf97c8">
<p>
This is the most important function in all <b>R</b>.
<code>str</code>: Compactly display the internal structure of an <b>R</b> object.
</p>
<ul class="org-ul">
<li>A diagnostic function and an alternative to <b>summary</b>.</li>
<li>It is especially well suited to compactly display the (abbreviated) contents of (possibly nested) lists.</li>
<li>Roughly one line per basic object.</li>
</ul>
<p>
The basic goal of <b>str</b> (of structure) is to answer the question, what's in this object.?
</p>
</div>
</div>
</div>

<div id="outline-container-orgef110b9" class="outline-2">
<h2 id="orgef110b9">Generating Random Numbers (Simulation)</h2>
<div class="outline-text-2" id="text-orgef110b9">
<p>
Functions for probability distributions in <b>R</b>.
</p>
<ul class="org-ul">
<li><b>rnom</b>  : generate random Normal variates with a given mean standard deviation.</li>
<li><b>dnorm</b> : evaluate the normal probability density (with a given mean/SD) at a point (or vector of points).</li>
<li><b>pnorm</b> : evaluate the cumulative distribution function for a Normal distribution.</li>
<li><b>rpois</b> : generate random Poisson variates with a given rate.</li>
</ul>

<p>
Probability distribution usually have four functions associated with them. The functions are prefixed with a:
</p>
<ul class="org-ul">
<li><b>d</b> for density,</li>
<li><b>r</b> for random number generation,</li>
<li><b>p</b> for cumulative distribution,</li>
<li><b>q</b> for quantile function.</li>
</ul>
<p>
So, every distribution has these four types of functions, so for the gamma distribution, there'll be a <b>dgamma</b>, <b>pgamma</b> and a <b>qgamma</b> function. And for the Poisson distribution there's the <b>rpois</b> <b>dpois</b> <b>ppois</b> and <b>qpois</b> functions. 
</p>

<p>
Working with the Normal distribution requires using these four functions.
</p>
<div class="org-src-container">
<pre class="src src-R">dnorm(x, mean=0, sd=1, log=FALSE)
pnorm(q, mean=0, sd=1, lower.tail=TRUE, log.p=FALSE)
qnorm(p, mean=0, sd=1, lower.tail=TRUE, log.p=FALSE)
rnorm(n, mean=0, sd=1)
</pre>
</div>

<p>
They each take a number of different parameters. All the functions required that you specify the <b>mean</b> and the standard deviation (<b>sd</b>), because that's what specifies the actual probability distribution. If you do not specify them, the default values are a standard normal distribution, which has <b>mean</b> = 0 and <b>standard deviation</b> one.
</p>

<p>
So just to be more explicit, if phi is the cumulative distribution for the standard normal distribution, then <b>pnorm</b> is equal to <b>phi</b> and <b>qnorm</b> is equal then to the inverse of <b>phi</b>.
</p>
<ul class="org-ul">
<li>If &Phi; is the cumulative distribution function for <b>a standard Normal distribution</b>, then <b>pnorm(q)</b> = &Phi;(q) and <b>qnorm(p)</b> = &Phi;<sup>-1</sup>(p).</li>
</ul>

<p>
In the following example, <b>x</b> will be a ten variables random normal distribution vector with a roughly 20 as <b>mean</b> and 2 as <b>standard deviation</b> (<b>sd</b>):
</p>

<div class="org-src-container">
<pre class="src src-R">x &lt;- rnorm(10, 20, 2)
&gt; x
[1] 18.37391 22.46904 19.26000 17.73401 20.12377 19.75070 21.50743 20.87168
[9] 19.92878 17.74464
</pre>
</div>
</div>

<div id="outline-container-orge4e7201" class="outline-4">
<h4 id="orge4e7201">The <code>set.seed</code> Function.</h4>
<div class="outline-text-4" id="text-orge4e7201">
<p>
Any time you simulate random numbers, from any distribution, for any purpose, it's very important that you set the random number generator seed (notice numbers are not actually random but they appear random, that's the important thing) so the idea is that if you wanted to generate the same set of random numbers again, you could if wanted using the <b>set.seed</b> function, so anytime you set the seed it kind of sets the sequence of random variable that's going to occur and when you reset you set the sequence to go back to, allowing you debug, checking, or basically reproducing the problematic situation.
</p>
</div>
</div>

<div id="outline-container-org2de8f0d" class="outline-3">
<h3 id="org2de8f0d">Generating Poisson Data.</h3>
<div class="outline-text-3" id="text-org2de8f0d">
<ul class="org-ul">
<li>In <b>probability theory</b>, a <b>Poisson process</b> (named after the French mathematician <a href="http://en.wikipedia.org/wiki/Sim%C3%A9on_Denis_Poisson">Siméon Denis Poisson</a>) is a <b>stochastic process</b> or <b>random process</b> (widely used) : a collection of random values, or the mathematical representation of, some random system or variable over time (indeterminacy). Those several (often infinitely many) directions in which the process may evolve.</li>
</ul>

<p>
Generating Poisson data:
</p>
<div class="org-src-container">
<pre class="src src-R">&gt; rpois(10, 1) ## rpois(count, mean) creates a distribution where count is the numbers to create &amp; mean you'd like those to come close to
[1] 3 1 0 1 0 0 1 0 1 1

&gt; rpois(10, 2
[1] 6 2 2 1 3 2 2 1 1 2

&gt; rpois(10, 20)
[1] 20 11 21 20 20 21 17 15 24 20

&gt; ppois(2, 2) ## Cumulative distribution
[1] 0.6766764 ## Pr(x &lt;= 2)

&gt; ppois(4, 2)
[1] 0.947347 ## Pr(x &lt;= 4)

&gt; ppois(6, 2)
[1] 0.9954662 ## Pr(x &lt;= 6)

</pre>
</div>
</div>
</div>

<div id="outline-container-org8dce4b2" class="outline-3">
<h3 id="org8dce4b2">Generating Random Numbers From a Linear Model.</h3>
<div class="outline-text-3" id="text-org8dce4b2">
<p>
Now, suppose we want to simulate from the following linear model: <br />
<img src="img/gen-rnumfromlm.png" alt="gen-rnumfromlm.png" />
</p>

<div class="org-src-container">
<pre class="src src-R">&gt; set.seed(20)
&gt; x &lt;- rnorm(100)
&gt; e &lt;- rnorm(100, 0, 2)
&gt; y &lt;- 0.5 + 2 * x + e
&gt; summary(y)
    Min. 1st Qu Median
-6.4080 -1.5400 0.7689 0.6893 2.9300 6.5050
&gt; plot(x, y)
</pre>
</div>
</div>
</div>
</div>



<div id="outline-container-org3122c1c" class="outline-2">
<h2 id="org3122c1c">The R Profiler</h2>
<div class="outline-text-2" id="text-org3122c1c">
<p>
Profiling is a systematic way to examine different parts of a program, useful when trying to optimise your code. Profiling is better than guessing. 
But, "we should forget about small efficiency, say about 97% of the time: premature optimisation is the root of a evil" (by Donald Knuth).
</p>

<ul class="org-ul">
<li><code>Rprof()</code> keeps track of the function call stack at regularly sampled intervals and tabulates how much time is spend in each function.</li>
<li>Default sampling interval is 0.02 seconds.</li>
<li>The <code>summaryRprof()</code> function tabulates the R profiler output and calculates how much time is spend in which function.</li>
<li>There are two methods for normalising data "by.total": divides the time spend in each function by the total run time; (in the 4th week quiz, a question showed a one-function script and asked for guessing, before running the script, what percentage it would report if we tried to normalise the script by.total, &#x2014;answer: 100%, because it's a just one function case); "by.self": does the same but subtracts out time spent in functions above in the call stack.</li>
</ul>
</div>
</div>




<div id="outline-container-org7c3bffb" class="outline-2">
<h2 id="org7c3bffb">Appendix. A, Some key shot views.</h2>
<div class="outline-text-2" id="text-org7c3bffb">
<p>
Just as a reminder by <a href="http://www.slideshare.net/ajayohri/learning-r-and-teaching-r">Ajay Ohri</a> about where on checking out for <a href="http://image.slidesharecdn.com/learningr-140614015522-phpapp01/95/slide-20-1024.jpg?cb=1402728969">R views</a>. <br />
</p>
<ul class="org-ul">
<li>PS. I am, e.g. at present, keen on going further into Bayesian Analysis, but still in need of some training support.</li>
</ul>

<p>
The next 4 slides is for a shot view for my 25 R commands, my 25 next &amp; my 15 favourites R packages.
</p>

<ul class="org-ul">
<li><img src="http://image.slidesharecdn.com/learningr-140614015522-phpapp01/95/slide-7-1024.jpg" alt="slide-7-1024.jpg" /></li>

<li><img src="http://image.slidesharecdn.com/learningr-140614015522-phpapp01/95/slide-15-1024.jpg" alt="slide-15-1024.jpg" /></li>

<li><img src="http://image.slidesharecdn.com/learningr-140614015522-phpapp01/95/slide-16-1024.jpg" alt="slide-16-1024.jpg" /></li>
</ul>
</div>
</div>

<div id="outline-container-org7e0b902" class="outline-2">
<h2 id="org7e0b902">Appendix. B Short List of the Most Useful Commands.</h2>
<div class="outline-text-2" id="text-org7e0b902">
</div>
<div id="outline-container-org64fdcb4" class="outline-3">
<h3 id="org64fdcb4">Input and Display</h3>
<div class="outline-text-3" id="text-org64fdcb4">
<div class="org-src-container">
<pre class="src src-R">#read files with labels in first row
read.table(filename,header=TRUE)           #read a tab or space delimited file
read.table(filename,header=TRUE,sep=',')   #read csv files

x=c(1,2,4,8,16 )                           #create a data vector with specified elements
y=c(1:10)                                  #create a data vector with elements 1-10
n=10
x1=c(rnorm(n))                             #create a n item vector of random normal deviates
y1=c(runif(n))+n                           #create another n item vector that has n added to each random uniform distribution
z=rbinom(n,size,prob)                      #create n samples of size "size" with probability prob from the binomial
vect=c(x,y)                                #combine them into one vector of length 2n
mat=cbind(x,y)                             #combine them into a n x 2 matrix
mat[4,2]                                   #display the 4th row and the 2nd column
mat[3,]                                    #display the 3rd row
mat[,2]                                    #display the 2nd column
subset(dataset,logical)                    #those objects meeting a logical criterion
subset(data.df,select=variables,logical)   #get those objects from a data frame that meet a criterion
data.df[data.df=logical]                   #yet another way to get a subset
x[order(x$B),]                             #sort a dataframe by the order of the elements in B
x[rev(order(x$B)),]                        #sort the dataframe in reverse order 

browse.workspace                           #a menu command that creates a window with information about all variables in the workspace

</pre>
</div>
</div>
</div>

<div id="outline-container-orgeb26637" class="outline-3">
<h3 id="orgeb26637">Moving around.</h3>
<div class="outline-text-3" id="text-orgeb26637">
<div class="org-src-container">
<pre class="src src-R">ls()                                      #list the variables in the workspace
rm(x)                                     #remove x from the workspace
rm(list=ls())                             #remove all the variables from the workspace
attach(mat)                               #make the names of the variables in the matrix or data frame available in the workspace
detach(mat)                               #releases the names
new=old[,-n]                              #drop the nth column
new=old[n,]                               #drop the nth row
new=subset(old,logical)                   #select those cases that meet the logical condition
complete = subset(data.df,complete.cases(data.df)) #find those cases with no missing values
new=old[n1:n2,n3:n4]                      #select the n1 through n2 rows of variables n3 through n4).

</pre>
</div>
</div>
</div>

<div id="outline-container-orgdab7252" class="outline-3">
<h3 id="orgdab7252">Distributions</h3>
<div class="outline-text-3" id="text-orgdab7252">
<div class="org-src-container">
<pre class="src src-R">beta(a, b)
gamma(x)
choose(n, k)
factorial(x)

dnorm(x, mean=0, sd=1, log = FALSE)      #normal distribution
pnorm(q, mean=0, sd=1, lower.tail = TRUE, log.p = FALSE)
qnorm(p, mean=0, sd=1, lower.tail = TRUE, log.p = FALSE)
rnorm(n, mean=0, sd=1)


dunif(x, min=0, max=1, log = FALSE)      #uniform distribution
punif(q, min=0, max=1, lower.tail = TRUE, log.p = FALSE)
qunif(p, min=0, max=1, lower.tail = TRUE, log.p = FALSE)
runif(n, min=0, max=1)


</pre>
</div>
</div>
</div>

<div id="outline-container-orgaa35088" class="outline-3">
<h3 id="orgaa35088">Data Manipulation.</h3>
<div class="outline-text-3" id="text-orgaa35088">
<div class="org-src-container">
<pre class="src src-R">replace(x, list, values)                 #remember to assign this to some object i.e., x &lt;- replace(x,x==-9,NA) 
                                         #similar to the operation x[x==-9] &lt;- NA


cut(x, breaks, labels = NULL,
    include.lowest = FALSE, right = TRUE, dig.lab = 3, ...)

x.df=data.frame(x1,x2,x3 ...)             #combine different kinds of data into a data frame
        as.data.frame()
        is.data.frame()
x=as.matrix()
scale()                                   #converts a data frame to standardized scores

round(x,n)                                #rounds the values of x to n decimal places
ceiling(x)                                #vector x of smallest integers &gt; x
floor(x)                                  #vector x of largest interger &lt; x
as.integer(x)                             #truncates real x to integers (compare to round(x,0)
as.integer(x &lt; cutpoint)                  #vector x of 0 if less than cutpoint, 1 if greater than cutpoint)
factor(ifelse(a &lt; cutpoint, "Neg", "Pos"))  #is another way to dichotomize and to make a factor for analysis 
transform(data.df,variable names = some operation) #can be part of a set up for a data set 

x%in%y                     #tests each element of x for membership in y
y%in%x                     #tests each element of y for membership in x
all(x%in%y)                #true if x is a proper subset of y
all(x)                     # for a vector of logical values, are they all true?
any(x)                     #for a vector of logical values, is at least one true?

</pre>
</div>
</div>
</div>

<div id="outline-container-org35d2010" class="outline-3">
<h3 id="org35d2010">Statistics and Transformations.</h3>
<div class="outline-text-3" id="text-org35d2010">
<div class="org-src-container">
<pre class="src src-R">max()
min()
mean()
median()
sum()
var()     #produces the variance covariance matrix
sd()      #standard deviation
mad()     #(median absolute deviation)
fivenum() #Tukey fivenumbers min, lowerhinge, median, upper hinge, max
table()   #frequency counts of entries, ideally the entries are factors(although it works with integers or even reals)
scale(data,scale=T)   #centers around the mean and scales by the sd)
cumsum(x)             #cumulative sum, etc.
cumprod(x)
cummax(x)
cummin(x)
rev(x)                #reverse the order of values in x

cor(x,y,use="pair")   #correlation matrix for pairwise complete data, use="complete" for complete cases

aov(x~y,data=datafile)#where x and y can be matrices
aov.ex1 = aov(DV~IV,data=data.ex1)  #do the analysis of variance or
aov.ex2 = aov(DV~IV1*IV21,data=data.ex2)         #do a two way analysis of variance
summary(aov.ex1)                                 #show the summary table
print(model.tables(aov.ex1,"means"),digits=3)    #report the means and the number of subjects/cell
boxplot(DV~IV,data=data.ex1)                     #graphical summary appears in graphics window
lm(x~y,data=dataset)                             #basic linear model where x and y can be matrices  (see plot.lm for plotting options)
t.test(x,g)
pairwise.t.test(x,g)
power.anova.test(groups = NULL, n = NULL, between.var = NULL,
                 within.var = NULL, sig.level = 0.05, power = NULL)
power.t.test(n = NULL, delta = NULL, sd = 1, sig.level = 0.05,
             power = NULL, type = c("two.sample", "one.sample", "paired"),
             alternative = c("two.sided", "one.sided"),strict = FALSE)

</pre>
</div>
</div>
</div>

<div id="outline-container-org35d683a" class="outline-3">
<h3 id="org35d683a">More Statistics: Regression and Linear Model</h3>
<div class="outline-text-3" id="text-org35d683a">
<div class="org-src-container">
<pre class="src src-R">matrices
lm(Y~X1+X2)
lm(Y~X|W)                              
solve(A,B)            #inverse of A * B   - used for linear regression
solve(A)              #inverse of A
factanal()
princomp()

</pre>
</div>
</div>
</div>

<div id="outline-container-org579302a" class="outline-3">
<h3 id="org579302a">Useful Additional Commands.</h3>
<div class="outline-text-3" id="text-org579302a">
<div class="org-src-container">
<pre class="src src-R">colSums (x, na.rm = FALSE, dims = 1)
     rowSums (x, na.rm = FALSE, dims = 1)
     colMeans(x, na.rm = FALSE, dims = 1)
     rowMeans(x, na.rm = FALSE, dims = 1)
     rowsum(x, group, reorder = TRUE, ...)         #finds row sums for each level of a grouping variable
     apply(X, MARGIN, FUN, ...)                    #applies the function (FUN) to either rows (1) or columns (2) on object X
        apply(x,1,min)                             #finds the minimum for each row
        apply(x,2,max)                             #finds the maximum for each column
    col.max(x)                                     #another way to find which column has the maximum value for each row 
    which.min(x)
    which.max(x)
        z=apply(big5r,1,which.min)                 #tells the row with the minimum value for every column

</pre>
</div>
</div>
</div>

<div id="outline-container-org94dc058" class="outline-3">
<h3 id="org94dc058">Graphics.</h3>
<div class="outline-text-3" id="text-org94dc058">
<div class="org-src-container">
<pre class="src src-R">par(mfrow=c(nrow,mcol))                   #number of rows and columns to graph
par(ask=TRUE)                             #ask for user input before drawing a new graph
par(omi=c(0,0,1,0) )                      #set the size of the outer margins 
mtext("some global title",3,outer=TRUE,line=1,cex=1.5)    #note that we seem to need to add the global title last
                     #cex = character expansion factor 

boxplot(x,main="title")                   #boxplot (box and whiskers)


title( "some title")                      #add a title to the first graph


hist()                                   #histogram
plot()
        plot(x,y,xlim=range(-1,1),ylim=range(-1,1),main=title)
        par(mfrow=c(1,1))     #change the graph window back to one figure
        symb=c(19,25,3,23)
        colors=c("black","red","green","blue")
        charact=c("S","T","N","H")
        plot(PA,NAF,pch=symb[group],col=colors[group],bg=colors[condit],cex=1.5,main="Postive vs. Negative Affect by Film condition")
        points(mPA,mNA,pch=symb[condit],cex=4.5,col=colors[condit],bg=colors[condit])

curve()
abline(a,b)
         abline(a, b, untf = FALSE, ...)
     abline(h=, untf = FALSE, ...)
     abline(v=, untf = FALSE, ...)
     abline(coef=, untf = FALSE, ...)
     abline(reg=, untf = FALSE, ...)

identify()
        plot(eatar,eanta,xlim=range(-1,1),ylim=range(-1,1),main=title)
        identify(eatar,eanta,labels=labels(energysR[,1])  )       #dynamically puts names on the plots
locate()

legend()
pairs()                                  #SPLOM (scatter plot Matrix)
pairs.panels ()    #SPLOM on lower off diagonal, histograms on diagonal, correlations on diagonal
                   #not standard R, but uses a function found in useful.r 
matplot ()
biplot ())
plot(table(x))                           #plot the frequencies of levels in x

x= recordPlot()                          #save the current plot device output in the object x
replayPlot(x)                            #replot object x
dev.control                              #various control functions for printing/saving graphic files
pdf(height=6, width=6)              #create a pdf file for output
dev.of()                            #close the pdf file created with pdf 
layout(mat)                         #specify where multiple graphs go on the page
                                    #experiment with the magic code from Paul Murrell to do fancy graphic location
layout(rbind(c(1, 1, 2, 2, 3, 3),
             c(0, 4, 4, 5, 5, 0)))   
for (i in 1:5) {
  plot(i, type="n")
  text(1, i, paste("Plot", i), cex=4)
}

</pre>
</div>
</div>
</div>

<div id="outline-container-orga29ee90" class="outline-3">
<h3 id="orga29ee90">Distributions.</h3>
<div class="outline-text-3" id="text-orga29ee90">
<p>
To generate random samples from a variety of distributions.
</p>
<div class="org-src-container">
<pre class="src src-R">rnorm(n,mean,sd)
rbinom(n,size,p)
sample(x, size, replace = FALSE, prob = NULL)      #samples with or without replacement

</pre>
</div>
</div>
</div>

<div id="outline-container-org66991bd" class="outline-3">
<h3 id="org66991bd">Working with Dates.</h3>
<div class="outline-text-3" id="text-org66991bd">
<div class="org-src-container">
<pre class="src src-R">date &lt;-strptime(as.character(date), "%m/%d/%y")   #change the date field to a internal form for time  
                                                  #see ?formats and ?POSIXlt  
 as.Date
 month= months(date)                              #see also weekdays, Julian

</pre>
</div>
</div>
</div>

<div id="outline-container-org17d45ac" class="outline-3">
<h3 id="org17d45ac">And More&#x2026;</h3>
<div class="outline-text-3" id="text-org17d45ac">
<p>
<a href="https://personality-project.org/r/r.useful.html">Additional functions</a> created by W. Revelle because, as stated, he needed some specific operation may be included in the workspace by issuing the source command:
</p>
<ul class="org-ul">
<li>source <a href="http://personality-project.org/r/useful.r">http://personality-project.org/r/useful.r</a></li>
</ul>
<p>
These functions include:
</p>
<div class="org-src-container">
<pre class="src src-R">#alpha.scale     #find coefficient alpha for a scale and a dataframe of items
#describe        give means, sd, skew, n, and se 
#summ.stats      #basic summary statistics by a grouping variable
#error.crosses   #(error bars in two space)
#skew            find skew
#panel.cor       taken from the examples for pairs
#pairs.panels    adapted from panel.cor  --   gives a splom, histogram, and correlation matrix
#multi.hist      #plot multiple histograms
#correct.cor     #given a correlation matrix and a vector of reliabilities, correct for reliability
#fisherz         #convert pearson r to fisher z
#paired.r        #test for difference of dependent correlations
#count.pairwise  #count the number of good cases when doing pairwise analysis
#eigen.loadings  #convert eigen vector vectors to factor loadings by unnormalizing them
#principal       #yet another way to do a principal components analysis -- brute force eignvalue decomp 
#factor.congruence #find the factor congruence coeffiecints
#factor.model      #given a factor model, find the correlation matrix
#factor.residuals  #how well does it fit?
#factor.rotate     # rotate two columns of a factor matrix by theta (in degrees)
#phi2poly          #convert a matrix of phi coefficients to polychoric correlations

</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: RS. Mo.</p>
<p class="email">Email: <a href="mailto:psicotherapy@gmail.com">psicotherapy@gmail.com</a></p>
<p class="date">Created: 2022-09-23 Fri 23:02</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
